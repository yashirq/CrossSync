<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CrossSync</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>CrossSync</h1>
      <div class="grow"></div>
      <button id="theme-toggle" class="icon-btn" title="主题：跟随系统">🌗</button>
    </header>

    <section id="panel-upload">
      <div class="seg" id="seg-dir" style="margin:8px 0 12px;">
        <input type="radio" name="dir" id="dir-pc" value="downloads" />
        <label for="dir-pc">发送到电脑</label>
        <input type="radio" name="dir" id="dir-iphone" value="outbox" />
        <label for="dir-iphone">发送到 iPhone</label>
      </div>
      <div class="summary card">
        <div class="row" style="gap:8px; flex-wrap: wrap;">
          <div class="chip">进行中 <strong id="sum-active">0</strong></div>
          <div class="chip">已完成 <strong id="sum-completed">0</strong></div>
          <div class="chip">失败 <strong id="sum-failed">0</strong></div>
          <div class="chip">速度 <strong id="sum-speed">0 B/s</strong></div>
          <div class="chip">ETA <strong id="sum-eta">—</strong></div>
          <button id="btn-clear-finished" class="btn">清理已完成</button>
        </div>
        <div class="bar" style="margin-top:8px;"><div id="sum-bar" style="width:0%"></div></div>
      </div>
      <div class="dropzone card" id="dropzone-upload">
        <p>拖拽文件到此，或 <label class="link"><input id="input-upload" type="file" multiple hidden />点击选择</label></p>
        <p class="muted">支持断点续传、并发分片上传（方向决定存放位置）</p>
      </div>
      <div class="row opt-grid" style="gap:8px; margin: 8px 0 8px;">
        <label><input type="checkbox" id="chk-open" /> 完成后在电脑上打开文件夹</label>
        <label><input type="checkbox" id="chk-date-subdir" /> 按日期归档到子目录</label>
        <label><input type="checkbox" id="chk-verify" /> 校验上传完整性</label>
      </div>
      <div class="row" style="gap:8px; margin: 0 0 16px; flex-wrap: wrap;">
        <button id="btn-pause-all" class="btn">暂停全部</button>
        <button id="btn-resume-all" class="btn">继续全部</button>
      </div>
      <div id="upload-list"></div>
      <h3 class="section-title" style="margin-top:24px;">📥 接收的文件</h3>
      <div class="toolbar" id="tlb-dl">
        <div class="left"></div>
        <div class="right">
          <button id="btn-open-downloads" class="icon-btn" title="打开接收目录">📂</button>
          <button id="btn-refresh-downloads" class="icon-btn" title="刷新">🔄</button>
          <div class="menu-wrap">
            <button class="icon-btn" data-menu="dl-more" title="更多">⋯</button>
            <div class="menu" id="menu-dl-more">
              <button id="btn-del-dl-selected" class="menu-item">删除选中</button>
              <button id="btn-clear-dl" class="menu-item">清空接收目录</button>
              <hr/>
              <button id="btn-selectall-dl" class="menu-item">全选</button>
              <button id="btn-selectnone-dl" class="menu-item">全不选</button>
            </div>
          </div>
        </div>
      </div>
      <div class="selbar" id="selbar-dl" style="display:none">
        <span>已选 <strong id="selcount-dl">0</strong></span>
        <div class="grow"></div>
        <button id="btn-dl-del-quick" class="btn">删除</button>
        <button id="btn-dl-cancel-sel" class="btn">取消</button>
      </div>
      <div id="downloads-list"></div>
    </section>

    <section id="panel-outbox">
      <h3 class="section-title" style="margin-top:24px;">📤 共享箱（发送到 iPhone）</h3>
      <p class="muted">iPhone 可在下方列表点击下载</p>
      <div class="toolbar" id="tlb-ob">
        <div class="left"></div>
        <div class="right">
          <button id="btn-open-outbox" class="icon-btn" title="打开共享箱目录">📂</button>
          <button id="btn-refresh-outbox" class="icon-btn" title="刷新">🔄</button>
          <div class="menu-wrap">
            <button class="icon-btn" data-menu="ob-more" title="更多">⋯</button>
            <div class="menu" id="menu-ob-more">
              <button id="btn-del-ob-selected" class="menu-item">删除选中</button>
              <button id="btn-clear-ob" class="menu-item">清空共享箱</button>
              <hr/>
              <button id="btn-selectall-ob" class="menu-item">全选</button>
              <button id="btn-selectnone-ob" class="menu-item">全不选</button>
            </div>
          </div>
        </div>
      </div>
      <div class="selbar" id="selbar-ob" style="display:none">
        <span>已选 <strong id="selcount-ob">0</strong></span>
        <div class="grow"></div>
        <button id="btn-ob-del-quick" class="btn">删除</button>
        <button id="btn-ob-cancel-sel" class="btn">取消</button>
      </div>
      <div id="outbox-list"></div>
    </section>
  </div>

  <script>
    const DEFAULT_CHUNK = {{ chunk_size }};
    const MAX_CONCURRENCY = {{ max_concurrency }};
  </script>
  <script src="/static/app.js"></script>
</body>
</html>
